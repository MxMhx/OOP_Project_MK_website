{"ast":null,"code":"import _slicedToArray from\"D:/vscode/OOP_Project_MK_website/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useParams}from\"react-router-dom\";import CategoryBar from\"../components/CategoryBar\";import{useEffect,useState,useContext}from\"react\";import axios from\"axios\";import AuthContext from\"../context/auth\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SingleProduct=function SingleProduct(){var _useParams=useParams(),category=_useParams.category,name=_useParams.name;var _useState=useState(1),_useState2=_slicedToArray(_useState,2),quantity=_useState2[0],setQuantity=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),product=_useState4[0],setProduct=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isLoading=_useState6[0],setIsLoading=_useState6[1];var _useContext=useContext(AuthContext),cookies=_useContext.cookies;useEffect(function(){axios.get(\"/category/\".concat(category,\"/\").concat(name)).then(function(res){return setProduct(res.data);});},[category,name]);var handleAddToCart=function handleAddToCart(){setIsLoading(true);axios.post(\"/cart/add\",{name:cookies.token,category:category,product:name,quantity:quantity}).then(function(){setIsLoading(false);setQuantity(1);window.location.reload();}).catch(function(){setIsLoading(false);});};var handlePlus=function handlePlus(){setQuantity(quantity+1);};var handleMinus=function handleMinus(){quantity<=1?setQuantity(1):setQuantity(quantity-1);};return/*#__PURE__*/_jsxs(\"div\",{className:\"font-kanit\",children:[/*#__PURE__*/_jsx(CategoryBar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex w-full justify-center my-16\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mx-5\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"rounded-xl\",width:540,src:product.image_url,alt:product.id}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex my-2 items-center justify-end\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-red w-4 h-4 rounded-full mr-2\"}),/*#__PURE__*/_jsxs(\"p\",{children:[product.calories,\" kcal.\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mx-5 w-[30%]\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"font-extrabold text-3xl mb-2\",children:product.name}),/*#__PURE__*/_jsx(\"p\",{children:product.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mt-9\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u0E08\\u0E33\\u0E19\\u0E27\\u0E19\"}),/*#__PURE__*/_jsx(\"button\",{className:\"border px-2 mx-3 rounded-full\",onClick:handleMinus,children:\"-\"}),/*#__PURE__*/_jsx(\"p\",{children:quantity}),/*#__PURE__*/_jsx(\"button\",{className:\"border px-2 mx-3 rounded-full\",onClick:handlePlus,children:\"+\"})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"flex bg-red text-white px-4 py-2 rounded-md hover:shadow-md items-center justify-between w-[130px]\",onClick:handleAddToCart,disabled:isLoading,children:[\"+\",/*#__PURE__*/_jsx(\"img\",{src:\"../icon/cart-icon.png\",className:\"w-5\",alt:\"cart-icon\"}),/*#__PURE__*/_jsx(\"div\",{className:\"border-l h-5\"}),product.price,\" .-\"]})]})]})]})]});};export default SingleProduct;","map":{"version":3,"names":["useParams","CategoryBar","useEffect","useState","useContext","axios","AuthContext","SingleProduct","category","name","quantity","setQuantity","product","setProduct","isLoading","setIsLoading","cookies","get","then","res","data","handleAddToCart","post","token","window","location","reload","catch","handlePlus","handleMinus","image_url","id","calories","description","price"],"sources":["D:/vscode/OOP_Project_MK_website/client/src/pages/SingleProduct.jsx"],"sourcesContent":["import { useParams } from \"react-router-dom\";\nimport CategoryBar from \"../components/CategoryBar\";\nimport { useEffect, useState, useContext } from \"react\";\nimport axios from \"axios\";\nimport AuthContext from \"../context/auth\";\n\nconst SingleProduct = () => {\n  const { category, name } = useParams();\n  const [quantity, setQuantity] = useState(1);\n  const [product, setProduct] = useState({});\n  const [isLoading, setIsLoading] = useState(false);\n  const { cookies } = useContext(AuthContext);\n\n  useEffect(() => {\n    axios\n      .get(`/category/${category}/${name}`)\n      .then((res) => setProduct(res.data));\n  }, [category, name]);\n\n  const handleAddToCart = () => {\n    setIsLoading(true);\n    axios\n      .post(\"/cart/add\", {\n        name: cookies.token,\n        category: category,\n        product: name,\n        quantity: quantity,\n      })\n      .then(() => {\n        setIsLoading(false);\n        setQuantity(1);\n        window.location.reload();\n      })\n      .catch(() => {\n        setIsLoading(false);\n      });\n  };\n\n  const handlePlus = () => {\n    setQuantity(quantity + 1);\n  };\n\n  const handleMinus = () => {\n    quantity <= 1 ? setQuantity(1) : setQuantity(quantity - 1);\n  };\n\n  return (\n    <div className=\"font-kanit\">\n      <CategoryBar />\n      <div className=\"flex w-full justify-center my-16\">\n        <div className=\"mx-5\">\n          <img\n            className=\"rounded-xl\"\n            width={540}\n            src={product.image_url}\n            alt={product.id}\n          />\n          <div className=\"flex my-2 items-center justify-end\">\n            <div className=\"bg-red w-4 h-4 rounded-full mr-2\"></div>\n            <p>{product.calories} kcal.</p>\n          </div>\n        </div>\n        <div className=\"mx-5 w-[30%]\">\n          <h1 className=\"font-extrabold text-3xl mb-2\">{product.name}</h1>\n          <p>{product.description}</p>\n          <div className=\"flex items-center justify-between mt-9\">\n            <div className=\"flex items-center\">\n              <h1>จำนวน</h1>\n              <button\n                className=\"border px-2 mx-3 rounded-full\"\n                onClick={handleMinus}\n              >\n                -\n              </button>\n              <p>{quantity}</p>\n              <button\n                className=\"border px-2 mx-3 rounded-full\"\n                onClick={handlePlus}\n              >\n                +\n              </button>\n            </div>\n            <button\n              className=\"flex bg-red text-white px-4 py-2 rounded-md hover:shadow-md items-center justify-between w-[130px]\"\n              onClick={handleAddToCart}\n              disabled={isLoading}\n            >\n              +\n              <img\n                src=\"../icon/cart-icon.png\"\n                className=\"w-5\"\n                alt=\"cart-icon\"\n              />\n              <div className=\"border-l h-5\"></div>\n              {product.price} .-\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default SingleProduct;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}