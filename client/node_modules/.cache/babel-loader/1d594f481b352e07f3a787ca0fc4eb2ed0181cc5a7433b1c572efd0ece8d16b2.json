{"ast":null,"code":"import _regeneratorRuntime from\"D:/vscode/OOP_Project_MK_website/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/vscode/OOP_Project_MK_website/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/vscode/OOP_Project_MK_website/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useContext}from\"react\";import FilterBar from\"../components/Filter\";import axios from\"axios\";import AuthContext from\"../context/auth\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),isLoading=_useState6[0],setIsLoading=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isInvalid=_useState8[0],setIsInvalid=_useState8[1];var _useContext=useContext(AuthContext),setCookies=_useContext.setCookies;var handleLogin=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();setIsLoading(true);axios.post(\"/auth/login\",{email:email,password:password}).then(function(res){setIsLoading(false);setIsInvalid(false);setEmail(\"\");setPassword(\"\");if(res.data.status!==\"Login Failed\"){setCookies(\"token\",res.data);window.location.replace(\"/\");}else{setIsInvalid(true);}}).catch(function(){setIsLoading(false);});case 3:case\"end\":return _context.stop();}},_callee);}));return function handleLogin(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"font-kanit\",children:[/*#__PURE__*/_jsx(FilterBar,{title:\"\\u0E40\\u0E02\\u0E49\\u0E32\\u0E2A\\u0E39\\u0E48\\u0E23\\u0E30\\u0E1A\\u0E1A\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center mt-5\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-1/3 h-max p-5 rounded-lg\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"pt-4 text-2xl text-center\",children:\"\\u0E40\\u0E02\\u0E49\\u0E32\\u0E2A\\u0E39\\u0E48\\u0E23\\u0E30\\u0E1A\\u0E1A\"}),isInvalid&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex border-red border rounded-md bg-red bg-opacity-25 px-6 py-4 my-4\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"\",alt:\"\"}),/*#__PURE__*/_jsx(\"p\",{children:\"invalid email or password\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:function onSubmit(e){return handleLogin(e);},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"w-full\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block m-2 text-red\",children:\"\\u0E2D\\u0E35\\u0E40\\u0E21\\u0E25\\u0E25\\u0E4C\"}),/*#__PURE__*/_jsx(\"input\",{className:\"px-2 py-1 rounded-lg shadow-md w-full\",type:\"email\",placeholder:\"Ex. test@email.com\",autoFocus:true,value:email,onChange:function onChange(e){return setEmail(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"w-full\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block m-2 text-red\",children:\"\\u0E23\\u0E2B\\u0E31\\u0E2A\\u0E1C\\u0E48\\u0E32\\u0E19\"}),/*#__PURE__*/_jsx(\"input\",{className:\"px-2 py-1 rounded-lg shadow-md w-full\",type:\"password\",placeholder:\"**********\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"w-full px-4 py-2 mt-3 font-bold text-white bg-red rounded-full\",type:\"submit\",disabled:isLoading,children:\"\\u0E40\\u0E02\\u0E49\\u0E32\\u0E2A\\u0E39\\u0E48\\u0E23\\u0E30\\u0E1A\\u0E1A\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"my-5 flex flex-col sm:flex-row justify-between\",children:[/*#__PURE__*/_jsx(\"a\",{className:\"text-red hover:text-third-color text-sm float-left\",href:\"/\",children:\"\\u0E25\\u0E37\\u0E21\\u0E23\\u0E2B\\u0E31\\u0E2A\\u0E1C\\u0E48\\u0E32\\u0E19?\"}),/*#__PURE__*/_jsx(\"a\",{className:\"text-red hover:text-third-color text-sm float-right\",href:\"/registor\",children:\"\\u0E2A\\u0E23\\u0E49\\u0E32\\u0E07\\u0E1A\\u0E31\\u0E0D\\u0E0A\\u0E35\"})]})]})})]});};export default Login;","map":{"version":3,"names":["React","useState","useContext","FilterBar","axios","AuthContext","Login","email","setEmail","password","setPassword","isLoading","setIsLoading","isInvalid","setIsInvalid","setCookies","handleLogin","e","preventDefault","post","then","res","data","status","window","location","replace","catch","target","value"],"sources":["D:/vscode/OOP_Project_MK_website/client/src/pages/Login.jsx"],"sourcesContent":["import React, { useState, useContext } from \"react\";\nimport FilterBar from \"../components/Filter\";\nimport axios from \"axios\";\nimport AuthContext from \"../context/auth\";\n\nconst Login = () => {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(\"\");\n  const [isInvalid, setIsInvalid] = useState(false);\n\n  const { setCookies } = useContext(AuthContext);\n\n  const handleLogin = async (e) => {\n    e.preventDefault();\n    setIsLoading(true);\n    axios\n      .post(\"/auth/login\", {\n        email: email,\n        password: password,\n      })\n      .then((res) => {\n        setIsLoading(false);\n        setIsInvalid(false);\n        setEmail(\"\");\n        setPassword(\"\");\n        if (res.data.status !== \"Login Failed\") {\n          setCookies(\"token\", res.data);\n          window.location.replace(\"/\");\n        } else {\n          setIsInvalid(true);\n        }\n      })\n      .catch(() => {\n        setIsLoading(false);\n      });\n  };\n\n  return (\n    <div className=\"font-kanit\">\n      <FilterBar title=\"เข้าสู่ระบบ\" />\n      <div className=\"flex justify-center mt-5\">\n        <div className=\"w-1/3 h-max p-5 rounded-lg\">\n          <h3 className=\"pt-4 text-2xl text-center\">เข้าสู่ระบบ</h3>\n          {isInvalid && (\n            <div className=\"flex border-red border rounded-md bg-red bg-opacity-25 px-6 py-4 my-4\">\n              <img src=\"\" alt=\"\" />\n              <p>invalid email or password</p>\n            </div>\n          )}\n          <form onSubmit={(e) => handleLogin(e)}>\n            <div className=\"w-full\">\n              <label className=\"block m-2 text-red\">อีเมลล์</label>\n              <input\n                className=\"px-2 py-1 rounded-lg shadow-md w-full\"\n                type=\"email\"\n                placeholder=\"Ex. test@email.com\"\n                autoFocus\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n              />\n            </div>\n            <div className=\"w-full\">\n              <label className=\"block m-2 text-red\">รหัสผ่าน</label>\n              <input\n                className=\"px-2 py-1 rounded-lg shadow-md w-full\"\n                type=\"password\"\n                placeholder=\"**********\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n              />\n            </div>\n            <div>\n              <button\n                className=\"w-full px-4 py-2 mt-3 font-bold text-white bg-red rounded-full\"\n                type=\"submit\"\n                disabled={isLoading}\n              >\n                เข้าสู่ระบบ\n              </button>\n            </div>\n          </form>\n          <div className=\"my-5 flex flex-col sm:flex-row justify-between\">\n            <a\n              className=\"text-red hover:text-third-color text-sm float-left\"\n              href=\"/\"\n            >\n              ลืมรหัสผ่าน?\n            </a>\n            <a\n              className=\"text-red hover:text-third-color text-sm float-right\"\n              href=\"/registor\"\n            >\n              สร้างบัญชี\n            </a>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Login;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}