{"ast":null,"code":"var _jsxFileName = \"D:\\\\vscode\\\\OOP_Project_MK_website\\\\client\\\\src\\\\context\\\\auth.jsx\",\n  _s = $RefreshSig$();\nimport axios from \"axios\";\nimport { useState, useEffect, createContext } from \"react\";\nimport { useCookies } from \"react-cookie\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/createContext();\nexport function AuthProvider(_ref) {\n  _s();\n  let {\n    children\n  } = _ref;\n  const [isAdmin, setIsAdmin] = useState(false);\n  const [isLogin, setIsLogin] = useState(false);\n  const [cookies, setCookies, removeCookies] = useCookies([\"\"]);\n  useEffect(() => {\n    axios.get(\"/user/current\", {\n      params: {\n        name: cookies.token\n      }\n    }).then(res => {\n      var _res$data$, _res$data$2, _res$data$3;\n      ((_res$data$ = res.data[0]) === null || _res$data$ === void 0 ? void 0 : _res$data$[\"_role\"]) === \"customer\" || ((_res$data$2 = res.data[0]) === null || _res$data$2 === void 0 ? void 0 : _res$data$2[\"_role\"]) === \"admin\";\n      console.log((_res$data$3 = res.data[0]) === null || _res$data$3 === void 0 ? void 0 : _res$data$3[\"_role\"]) ? setIsLogin(true) : setIsLogin(false);\n      res.data._role === \"admin\" ? setIsAdmin(true) : setIsAdmin(false);\n    });\n  }, [cookies]);\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      isAdmin,\n      isLogin,\n      cookies,\n      setCookies,\n      removeCookies\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 26,\n    columnNumber: 5\n  }, this);\n}\n_s(AuthProvider, \"R+ASVagSHFmXBCkcTeQtUY5LbTU=\", false, function () {\n  return [useCookies];\n});\n_c = AuthProvider;\nexport default AuthContext;\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["axios","useState","useEffect","createContext","useCookies","AuthContext","AuthProvider","children","isAdmin","setIsAdmin","isLogin","setIsLogin","cookies","setCookies","removeCookies","get","params","name","token","then","res","data","console","log","_role"],"sources":["D:/vscode/OOP_Project_MK_website/client/src/context/auth.jsx"],"sourcesContent":["import axios from \"axios\";\r\nimport { useState, useEffect, createContext } from \"react\";\r\nimport { useCookies } from \"react-cookie\";\r\n\r\nconst AuthContext = createContext();\r\n\r\nexport function AuthProvider({ children }) {\r\n  const [isAdmin, setIsAdmin] = useState(false);\r\n  const [isLogin, setIsLogin] = useState(false);\r\n\r\n  const [cookies, setCookies, removeCookies] = useCookies([\"\"]);\r\n\r\n  useEffect(() => {\r\n    axios\r\n      .get(\"/user/current\", { params: { name: cookies.token } })\r\n      .then((res) => {\r\n        res.data[0]?.[\"_role\"] === \"customer\" ||\r\n          res.data[0]?.[\"_role\"] === \"admin\";\r\n        console.log(res.data[0]?.[\"_role\"])\r\n          ? setIsLogin(true)\r\n          : setIsLogin(false);\r\n        res.data._role === \"admin\" ? setIsAdmin(true) : setIsAdmin(false);\r\n      });\r\n  }, [cookies]);\r\n  return (\r\n    <AuthContext.Provider\r\n      value={{\r\n        isAdmin,\r\n        isLogin,\r\n        cookies,\r\n        setCookies,\r\n        removeCookies,\r\n      }}\r\n    >\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n}\r\n\r\nexport default AuthContext;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,QAAQ,EAAEC,SAAS,EAAEC,aAAa,QAAQ,OAAO;AAC1D,SAASC,UAAU,QAAQ,cAAc;AAAC;AAE1C,MAAMC,WAAW,gBAAGF,aAAa,EAAE;AAEnC,OAAO,SAASG,YAAY,OAAe;EAAA;EAAA,IAAd;IAAEC;EAAS,CAAC;EACvC,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGR,QAAQ,CAAC,KAAK,CAAC;EAC7C,MAAM,CAACS,OAAO,EAAEC,UAAU,CAAC,GAAGV,QAAQ,CAAC,KAAK,CAAC;EAE7C,MAAM,CAACW,OAAO,EAAEC,UAAU,EAAEC,aAAa,CAAC,GAAGV,UAAU,CAAC,CAAC,EAAE,CAAC,CAAC;EAE7DF,SAAS,CAAC,MAAM;IACdF,KAAK,CACFe,GAAG,CAAC,eAAe,EAAE;MAAEC,MAAM,EAAE;QAAEC,IAAI,EAAEL,OAAO,CAACM;MAAM;IAAE,CAAC,CAAC,CACzDC,IAAI,CAAEC,GAAG,IAAK;MAAA;MACb,eAAAA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,+CAAX,WAAc,OAAO,CAAC,MAAK,UAAU,IACnC,gBAAAD,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,gDAAX,YAAc,OAAO,CAAC,MAAK,OAAO;MACpCC,OAAO,CAACC,GAAG,gBAACH,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,gDAAX,YAAc,OAAO,CAAC,CAAC,GAC/BV,UAAU,CAAC,IAAI,CAAC,GAChBA,UAAU,CAAC,KAAK,CAAC;MACrBS,GAAG,CAACC,IAAI,CAACG,KAAK,KAAK,OAAO,GAAGf,UAAU,CAAC,IAAI,CAAC,GAAGA,UAAU,CAAC,KAAK,CAAC;IACnE,CAAC,CAAC;EACN,CAAC,EAAE,CAACG,OAAO,CAAC,CAAC;EACb,oBACE,QAAC,WAAW,CAAC,QAAQ;IACnB,KAAK,EAAE;MACLJ,OAAO;MACPE,OAAO;MACPE,OAAO;MACPC,UAAU;MACVC;IACF,CAAE;IAAA,UAEDP;EAAQ;IAAA;IAAA;IAAA;EAAA,QACY;AAE3B;AAAC,GA/BeD,YAAY;EAAA,QAImBF,UAAU;AAAA;AAAA,KAJzCE,YAAY;AAiC5B,eAAeD,WAAW;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}