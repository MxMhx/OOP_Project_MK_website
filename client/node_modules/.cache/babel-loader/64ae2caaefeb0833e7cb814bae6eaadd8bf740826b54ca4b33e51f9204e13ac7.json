{"ast":null,"code":"import _slicedToArray from\"D:/vscode/OOP_Project_MK_website/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from\"axios\";import{useState,useEffect,createContext}from\"react\";import{useCookies}from\"react-cookie\";import{jsx as _jsx}from\"react/jsx-runtime\";var AuthContext=/*#__PURE__*/createContext();export function AuthProvider(_ref){var children=_ref.children;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isAdmin=_useState2[0],setIsAdmin=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isLogin=_useState4[0],setIsLogin=_useState4[1];var _useCookies=useCookies([\"\"]),_useCookies2=_slicedToArray(_useCookies,3),cookies=_useCookies2[0],setCookies=_useCookies2[1],removeCookies=_useCookies2[2];useEffect(function(){axios.get(\"/user/current\",{params:{name:cookies.token}}).then(function(res){var _res$data$,_res$data$2,_res$data$3;((_res$data$=res.data[0])===null||_res$data$===void 0?void 0:_res$data$[\"_role\"])===\"customer\"||((_res$data$2=res.data[0])===null||_res$data$2===void 0?void 0:_res$data$2[\"_role\"])===\"admin\"?setIsLogin(true):setIsLogin(false);((_res$data$3=res.data[0])===null||_res$data$3===void 0?void 0:_res$data$3[\"_role\"])===\"admin\"?setIsAdmin(true):setIsAdmin(false);});},[cookies]);return/*#__PURE__*/_jsx(AuthContext.Provider,{value:{isAdmin:isAdmin,isLogin:isLogin,cookies:cookies,setCookies:setCookies,removeCookies:removeCookies},children:children});}export default AuthContext;","map":{"version":3,"names":["axios","useState","useEffect","createContext","useCookies","AuthContext","AuthProvider","children","isAdmin","setIsAdmin","isLogin","setIsLogin","cookies","setCookies","removeCookies","get","params","name","token","then","res","data"],"sources":["D:/vscode/OOP_Project_MK_website/client/src/context/auth.jsx"],"sourcesContent":["import axios from \"axios\";\nimport { useState, useEffect, createContext } from \"react\";\nimport { useCookies } from \"react-cookie\";\n\nconst AuthContext = createContext();\n\nexport function AuthProvider({ children }) {\n  const [isAdmin, setIsAdmin] = useState(false);\n  const [isLogin, setIsLogin] = useState(false);\n\n  const [cookies, setCookies, removeCookies] = useCookies([\"\"]);\n\n  useEffect(() => {\n    axios\n      .get(\"/user/current\", { params: { name: cookies.token } })\n      .then((res) => {\n        res.data[0]?.[\"_role\"] === \"customer\" ||\n        res.data[0]?.[\"_role\"] === \"admin\"\n          ? setIsLogin(true)\n          : setIsLogin(false);\n        res.data[0]?.[\"_role\"] === \"admin\"\n          ? setIsAdmin(true)\n          : setIsAdmin(false);\n      });\n  }, [cookies]);\n  return (\n    <AuthContext.Provider\n      value={{\n        isAdmin,\n        isLogin,\n        cookies,\n        setCookies,\n        removeCookies,\n      }}\n    >\n      {children}\n    </AuthContext.Provider>\n  );\n}\n\nexport default AuthContext;\n"],"mappings":"6HAAA,MAAOA,MAAK,KAAM,OAAO,CACzB,OAASC,QAAQ,CAAEC,SAAS,CAAEC,aAAa,KAAQ,OAAO,CAC1D,OAASC,UAAU,KAAQ,cAAc,CAAC,2CAE1C,GAAMC,YAAW,cAAGF,aAAa,EAAE,CAEnC,MAAO,SAASG,aAAY,MAAe,IAAZC,SAAQ,MAARA,QAAQ,CACrC,cAA8BN,QAAQ,CAAC,KAAK,CAAC,wCAAtCO,OAAO,eAAEC,UAAU,eAC1B,eAA8BR,QAAQ,CAAC,KAAK,CAAC,yCAAtCS,OAAO,eAAEC,UAAU,eAE1B,gBAA6CP,UAAU,CAAC,CAAC,EAAE,CAAC,CAAC,4CAAtDQ,OAAO,iBAAEC,UAAU,iBAAEC,aAAa,iBAEzCZ,SAAS,CAAC,UAAM,CACdF,KAAK,CACFe,GAAG,CAAC,eAAe,CAAE,CAAEC,MAAM,CAAE,CAAEC,IAAI,CAAEL,OAAO,CAACM,KAAM,CAAE,CAAC,CAAC,CACzDC,IAAI,CAAC,SAACC,GAAG,CAAK,wCACb,aAAAA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,qCAAX,WAAc,OAAO,CAAC,IAAK,UAAU,EACrC,cAAAD,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,sCAAX,YAAc,OAAO,CAAC,IAAK,OAAO,CAC9BV,UAAU,CAAC,IAAI,CAAC,CAChBA,UAAU,CAAC,KAAK,CAAC,CACrB,cAAAS,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,sCAAX,YAAc,OAAO,CAAC,IAAK,OAAO,CAC9BZ,UAAU,CAAC,IAAI,CAAC,CAChBA,UAAU,CAAC,KAAK,CAAC,CACvB,CAAC,CAAC,CACN,CAAC,CAAE,CAACG,OAAO,CAAC,CAAC,CACb,mBACE,KAAC,WAAW,CAAC,QAAQ,EACnB,KAAK,CAAE,CACLJ,OAAO,CAAPA,OAAO,CACPE,OAAO,CAAPA,OAAO,CACPE,OAAO,CAAPA,OAAO,CACPC,UAAU,CAAVA,UAAU,CACVC,aAAa,CAAbA,aACF,CAAE,UAEDP,QAAQ,EACY,CAE3B,CAEA,cAAeF,YAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}