{"ast":null,"code":"import _slicedToArray from\"D:/vscode/OOP_Project_MK_website/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,useContext}from\"react\";import Cart from\"../components/Cart\";import axios from\"axios\";import AuthContext from\"../context/auth\";import Payment from\"./Payment\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Header(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),show=_useState2[0],setShow=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),delivery=_useState4[0],setDelivery=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),cart=_useState6[0],setCart=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),order=_useState8[0],setOrder=_useState8[1];var showCart=function showCart(){return setShow(true);};var hideCart=function hideCart(){return setShow(false);};var _useContext=useContext(AuthContext),isLogin=_useContext.isLogin,cookies=_useContext.cookies,isAdmin=_useContext.isAdmin;var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isLoading=_useState10[0],setIsLoading=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),payment=_useState12[0],setPayment=_useState12[1];useEffect(function(){axios.get(\"/cart/get\",{params:{name:cookies.token}}).then(function(res){return setCart(res.data);});},[cookies]);var handleCheckOut=function handleCheckOut(){setIsLoading(true);axios.post(\"/order/create_order\",{username:cookies.token}).then(function(res){setIsLoading(false);hideCart();setPayment(true);setOrder(res.data);}).catch(function(){setIsLoading(false);});};return/*#__PURE__*/_jsxs(\"div\",{className:\"text-white font-kanit\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-red flex justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"items-center flex w-full justify-between my-1 mx-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"lg:hidden item-center\",children:/*#__PURE__*/_jsx(\"img\",{src:\"https://www.mk1642.com/App_Themes/Source/images/ico/Group-2149.png\",alt:\"menu\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"\",children:[/*#__PURE__*/_jsx(\"a\",{href:\"/\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/logo.png\",alt:\"logo\",className:\"h-12\"})}),/*#__PURE__*/_jsxs(\"p\",{className:\"hidden lg:block text-sm\",children:[\"\\u0E2A\\u0E32\\u0E21\\u0E32\\u0E23\\u0E16\\u0E2A\\u0E31\\u0E48\\u0E07\\u0E2D\\u0E32\\u0E2B\\u0E32\\u0E23\\u0E44\\u0E14\\u0E49 \",/*#__PURE__*/_jsx(\"strong\",{children:\"10:00 - 19:45 \\u0E19.\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"hidden lg:grid font-semibold w-1/3 place-items-center py-4 space-y-3\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-3xl\",children:[\"Welcome to \",/*#__PURE__*/_jsx(\"strong\",{children:\"MK Online Delivery\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"button-box flex\",children:[/*#__PURE__*/_jsx(\"div\",{id:\"btnn\",className:\"left-0\"}),/*#__PURE__*/_jsxs(\"button\",{className:\"flex toggle-button text-sm justify-center\",onClick:leftClick,children:[/*#__PURE__*/_jsx(\"img\",{src:\"../icon/delivery.png\",width:20,className:\"mr-3\",alt:\"delivery-icon\"}),\"\\u0E40\\u0E14\\u0E25\\u0E34\\u0E40\\u0E27\\u0E2D\\u0E23\\u0E35\\u0E48\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"flex toggle-button text-sm justify-center\",onClick:rightClick,children:[/*#__PURE__*/_jsx(\"img\",{src:\"../icon/shop.png\",width:20,className:\"mr-3\",alt:\"shop-icon\"}),\"\\u0E23\\u0E31\\u0E1A\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\\u0E17\\u0E35\\u0E48\\u0E23\\u0E49\\u0E32\\u0E19\"]})]})}),delivery?/*#__PURE__*/_jsxs(\"div\",{className:\"search-box flex w-full justify-between\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"p-3 h-4 text-xs font-light w-full rounded-l-md text-black\",type:\"text\",placeholder:\"\\u0E04\\u0E49\\u0E19\\u0E2B\\u0E32\\u0E2A\\u0E16\\u0E32\\u0E19\\u0E17\\u0E35\\u0E48\\u0E40\\u0E1E\\u0E37\\u0E48\\u0E2D\\u0E15\\u0E23\\u0E27\\u0E08\\u0E2A\\u0E2D\\u0E1A\\u0E1E\\u0E37\\u0E49\\u0E19\\u0E17\\u0E35\\u0E48\\u0E08\\u0E31\\u0E14\\u0E2A\\u0E48\\u0E07\"}),/*#__PURE__*/_jsx(\"div\",{className:\"search-icon grid bg-gray rounded-r-md place-items-center w-8\",children:/*#__PURE__*/_jsx(\"a\",{href:\"/\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/crosshair.png\",alt:\"crosshair logo\",width:\"13\"})})})]}):/*#__PURE__*/_jsx(\"select\",{name:\"\\u0E42\\u0E1B\\u0E23\\u0E14\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E2A\\u0E32\\u0E02\\u0E32\",className:\"bg-[#9C0010] w-1/3 text-xs rounded-lg p-2\",children:/*#__PURE__*/_jsx(\"option\",{value:\"01\",children:\"\\u0E25\\u0E32\\u0E14\\u0E01\\u0E23\\u0E30\\u0E1A\\u0E31\\u0E07\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"\",children:[isLogin?isAdmin?/*#__PURE__*/_jsx(\"a\",{href:\"/admin\",children:\"admin\"}):/*#__PURE__*/_jsx(\"a\",{href:\"/profile\",children:\"profile\"}):/*#__PURE__*/_jsx(\"a\",{href:\"/login\",className:\"hidden lg:block text-sm\",children:\"\\u0E40\\u0E02\\u0E49\\u0E32\\u0E2A\\u0E39\\u0E48\\u0E23\\u0E30\\u0E1A\\u0E1A/\\u0E25\\u0E07\\u0E17\\u0E30\\u0E40\\u0E1A\\u0E35\\u0E22\\u0E19\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"lg:flex items-center justify-end mt-1 hover:cursor-pointer\",onClick:function onClick(e){showCart();},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://www.mk1642.com/App_Themes/Source/images/ico/Group-1610.png\",alt:\"cart_logo\"}),/*#__PURE__*/_jsx(\"p\",{className:\"absolute left-6 top-4 text-sm\",children:cart.amount===null?0:cart.amount})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"ml-5 font-semibold\",children:[cart.total_cost===null?0:cart.total_cost,\" .-\"]})]})]})]})}),show&&/*#__PURE__*/_jsx(Cart,{handleClose:hideCart,cart:cart,handleCheckOut:handleCheckOut,isLoading:isLoading}),payment&&/*#__PURE__*/_jsx(Payment,{handleClose:setPayment,order:order})]});function leftClick(){var btn=document.getElementById(\"btnn\");btn.style.left=\"0\";setDelivery(true);}function rightClick(){var btn=document.getElementById(\"btnn\");btn.style.left=\"50%\";setDelivery(false);}}export default Header;","map":{"version":3,"names":["React","useState","useEffect","useContext","Cart","axios","AuthContext","Payment","Header","show","setShow","delivery","setDelivery","cart","setCart","order","setOrder","showCart","hideCart","isLogin","cookies","isAdmin","isLoading","setIsLoading","payment","setPayment","get","params","name","token","then","res","data","handleCheckOut","post","username","catch","leftClick","rightClick","e","amount","total_cost","btn","document","getElementById","style","left"],"sources":["D:/vscode/OOP_Project_MK_website/client/src/components/Header.jsx"],"sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\r\nimport Cart from \"../components/Cart\";\r\nimport axios from \"axios\";\r\nimport AuthContext from \"../context/auth\";\r\nimport Payment from \"./Payment\";\r\n\r\nfunction Header() {\r\n  const [show, setShow] = useState(false);\r\n  const [delivery, setDelivery] = useState(true);\r\n  const [cart, setCart] = useState([]);\r\n  const [order, setOrder] = useState([]);\r\n  const showCart = () => setShow(true);\r\n  const hideCart = () => setShow(false);\r\n  const { isLogin, cookies, isAdmin } = useContext(AuthContext);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [payment, setPayment] = useState(false);\r\n\r\n  useEffect(() => {\r\n    axios\r\n      .get(\"/cart/get\", { params: { name: cookies.token } })\r\n      .then((res) => setCart(res.data));\r\n  }, [cookies]);\r\n\r\n  const handleCheckOut = () => {\r\n    setIsLoading(true);\r\n    axios\r\n      .post(\"/order/create_order\", { username: cookies.token })\r\n      .then((res) => {\r\n        setIsLoading(false);\r\n        hideCart();\r\n        setPayment(true);\r\n        setOrder(res.data);\r\n      })\r\n      .catch(() => {\r\n        setIsLoading(false);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div className=\"text-white font-kanit\">\r\n      <div className=\"bg-red flex justify-center\">\r\n        <div className=\"items-center flex w-full justify-between my-1 mx-6\">\r\n          <div className=\"lg:hidden item-center\">\r\n            <img\r\n              src=\"https://www.mk1642.com/App_Themes/Source/images/ico/Group-2149.png\"\r\n              alt=\"menu\"\r\n            />\r\n          </div>\r\n          <div className=\"\">\r\n            <a href=\"/\">\r\n              <img src=\"/logo.png\" alt=\"logo\" className=\"h-12\" />\r\n            </a>\r\n            <p className=\"hidden lg:block text-sm\">\r\n              สามารถสั่งอาหารได้ <strong>10:00 - 19:45 น.</strong>\r\n            </p>\r\n          </div>\r\n          <div className=\"hidden lg:grid font-semibold w-1/3 place-items-center py-4 space-y-3\">\r\n            <h1 className=\"text-3xl\">\r\n              Welcome to <strong>MK Online Delivery</strong>\r\n            </h1>\r\n            <div className=\"flex\">\r\n              <div className=\"button-box flex\">\r\n                <div id=\"btnn\" className=\"left-0\"></div>\r\n                <button\r\n                  className=\"flex toggle-button text-sm justify-center\"\r\n                  onClick={leftClick}\r\n                >\r\n                  <img\r\n                    src=\"../icon/delivery.png\"\r\n                    width={20}\r\n                    className=\"mr-3\"\r\n                    alt=\"delivery-icon\"\r\n                  />\r\n                  เดลิเวอรี่\r\n                </button>\r\n                <button\r\n                  className=\"flex toggle-button text-sm justify-center\"\r\n                  onClick={rightClick}\r\n                >\r\n                  <img\r\n                    src=\"../icon/shop.png\"\r\n                    width={20}\r\n                    className=\"mr-3\"\r\n                    alt=\"shop-icon\"\r\n                  />\r\n                  รับสินค้าที่ร้าน\r\n                </button>\r\n              </div>\r\n            </div>\r\n            {delivery ? (\r\n              <div className=\"search-box flex w-full justify-between\">\r\n                <input\r\n                  className=\"p-3 h-4 text-xs font-light w-full rounded-l-md text-black\"\r\n                  type=\"text\"\r\n                  placeholder=\"ค้นหาสถานที่เพื่อตรวจสอบพื้นที่จัดส่ง\"\r\n                />\r\n                <div className=\"search-icon grid bg-gray rounded-r-md place-items-center w-8\">\r\n                  <a href=\"/\">\r\n                    <img src=\"/crosshair.png\" alt=\"crosshair logo\" width=\"13\" />\r\n                  </a>\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <select\r\n                name=\"โปรดเลือกสาขา\"\r\n                className=\"bg-[#9C0010] w-1/3 text-xs rounded-lg p-2\"\r\n              >\r\n                <option value=\"01\">ลาดกระบัง</option>\r\n              </select>\r\n            )}\r\n          </div>\r\n          <div className=\"\">\r\n            {isLogin ? (\r\n              isAdmin ? (\r\n                <a href=\"/admin\">admin</a>\r\n              ) : (\r\n                <a href=\"/profile\">profile</a>\r\n              )\r\n            ) : (\r\n              <a href=\"/login\" className=\"hidden lg:block text-sm\">\r\n                เข้าสู่ระบบ/ลงทะเบียน\r\n              </a>\r\n            )}\r\n            <div\r\n              className=\"lg:flex items-center justify-end mt-1 hover:cursor-pointer\"\r\n              onClick={(e) => {\r\n                showCart();\r\n              }}\r\n            >\r\n              <div className=\"relative\">\r\n                <img\r\n                  src=\"https://www.mk1642.com/App_Themes/Source/images/ico/Group-1610.png\"\r\n                  alt=\"cart_logo\"\r\n                />\r\n                <p className=\"absolute left-6 top-4 text-sm\">\r\n                  {cart.amount === null ? 0 : cart.amount}\r\n                </p>\r\n              </div>\r\n              <p className=\"ml-5 font-semibold\">\r\n                {cart.total_cost === null ? 0 : cart.total_cost} .-\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {show && (\r\n        <Cart\r\n          handleClose={hideCart}\r\n          cart={cart}\r\n          handleCheckOut={handleCheckOut}\r\n          isLoading={isLoading}\r\n        />\r\n      )}\r\n      {payment && <Payment handleClose={setPayment} order={order} />}\r\n    </div>\r\n  );\r\n\r\n  function leftClick() {\r\n    var btn = document.getElementById(\"btnn\");\r\n    btn.style.left = \"0\";\r\n    setDelivery(true);\r\n  }\r\n\r\n  function rightClick() {\r\n    var btn = document.getElementById(\"btnn\");\r\n    btn.style.left = \"50%\";\r\n    setDelivery(false);\r\n  }\r\n}\r\n\r\nexport default Header;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}